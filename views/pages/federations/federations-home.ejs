<div id="federations-home" class="content pb-5" v-cloak>
  <% /* Диалоговое окно. Добавить | Редактировать федерацию. */ %>
  <el-dialog title="<%= __('Add Federation') %>"
             :visible.sync="centerDialogAdded"
             custom-class="dialog-add"
             center>
    <% /* Диалоговое окно. Не верный язык ввода. */ %>
    <el-dialog
            title="<%= __('Error') %>"
            width="30%"
            :visible.sync="ruleForm.errInputLang"
            :show-close=false
            append-to-body> Lang: {{ruleForm.lang}}
      <span><%= __('This field is only filled') %>
        <span v-if="ruleForm.lang === 'ru'"> <%= __('russians') %></span><span v-else><%= __('english') %></span>
        <%= __('letters. Switch the keyboard to the correct layout.') %></span>
      <span slot="footer" class="dialog-footer">
          <el-button type="primary" autofocus
                     @click="clear()">
            Ok</el-button>
      </span>
    </el-dialog>
    <template v-if="!ruleForm.see">
      <el-popover
              ref="popover"
              placement="top"
              title="<%= __('Visibility') %>"
              width="275"
              trigger="hover"
              content="<%= __('At the moment, the title is hidden, that is, it will not be visible in the system and therefore articles on this title are also hidden. Set the visibility.') %>">
      </el-popover>
      <div class="flex justify-content-center">
        <h1 v-if="buttonUpdate" class="flex justify-content-center"
            :class="classObject"
        >{{ruleForm.label}}
        </h1>
        <el-button class="not-border text-danger" icon="el-icon-warning-outline" size="mini" v-popover:popover circle></el-button>
      </div>
    </template>
    <template v-else>
      <h1 v-if="buttonUpdate" class="flex justify-content-center"
          :class="classObject"
      >{{ruleForm.label}}</h1>
      <div class="flex justify-content-between text-secondary">
        <div class="font-italic text-capitalize" v-if="ruleForm.createdAt"><small><%= __('created') %>: {{ruleForm.createdAt | getCreate}}</small></div>
        <div class="font-italic text-capitalize" v-if="ruleForm.updatedAt"><small><%= __('edited') %>: {{ruleForm.updatedAt | getCreate}}</small></div>
      </div>

    </template>


    <div v-if="ruleForm.imageUrl">
      <div class="single-gallery-image" :style="{ backgroundImage: `url('${ruleForm.imageUrl}')` }"></div>
    </div>
    <div v-if="ruleForm.imagesArrUrl" class="flex justify-content-center">
      <el-image v-if="ruleForm.imagesArrUrl.length"
                style="width: 200px; height: 200px"
                :src="ruleForm.imagesArrUrl[0]"
                :preview-src-list="ruleForm.imagesArrUrl">
      </el-image>
    </div>

    <el-collapse accordion>
      <el-collapse-item name="1">
        <template slot="title">
          <h5><%= __('Multiple upload photos') %></h5>  <i class="ml-1 header-icon el-icon-info"></i>
        </template>
        <label v-if="!ruleForm.imageUrl">
          <%= __('Download right before') %> {{limit}} <%= __('photos for this module.') %>
          <%= __('Please note that the weight of the photo file should not exceed') %> {{sizeLess}}M.
          <%= __('You can download whatever you want without selecting photos, the system itself will produce the result of those images that have been selected by restrictions.') %>

        </label>

        <div class="my-2">
          <el-divider content-position="left"><%= __('Add photo') %></el-divider>
        </div>

        <!---------------------------------------------------------------------------------------->
        <% /*Загрузка фото NEW*/ %>
        <el-row type="flex" class="row-bg" justify="center">
          <el-col :xs="24" :sm="24" :md="24" :lg="24" :xl="24">
            <el-upload
                    action="/api/v1/files/upload"
                    list-type="picture-card"
                    drag
                    multiple
                    ref="upload"
                    :on-preview="handlePictureCardPreview"
                    :before-upload="beforeUpload"
                    :limit="limit"
                    :on-success="handleSuccess"
                    :on-exceed="handleExceed"
                    :on-remove="handleRemove"
            >
              <i class="el-icon-plus"></i>
              <div class="el-upload__tip" slot="tip"><%= __('jpg/png files with a size less than ') %>
                {{sizeLess}}<%= __('MB') %></div>
            </el-upload>
            <br>
            <el-dialog :visible.sync="dialogVisible">
              <img :src="dialogImageUrl" alt="">
            </el-dialog>
          </el-col>
        </el-row>
        <!---------------------------------------------------------------------------------------->
      </el-collapse-item>
    </el-collapse>


    <el-row type="flex" class="row-bg mt-3" justify="center">
      <el-col :xs="24" :sm="24" :md="24" :lg="20" :xl="20">
        <el-form :model="ruleForm" :rules="rules" ref="ruleForm" class="demo-ruleForm">
          <el-divider content-position="left">English</el-divider>
          <% /* НАЗВАНИЕ ТИТУЛА на английском*/ %>
          <template>
            <el-form-item label="<%= __('Title') %> (En)" prop="label">
              <el-input show-word-limit
                        style="width:80%;"
                        clearable
                        maxlength="70"
                        size="small"
                        :keyup="ruleForm.label"
                        placeholder="<%= __('Title') %>"
                        v-model="ruleForm.label"></el-input>
            </el-form-item>
          </template>

          <% /* ОПИСАНИЕ ТИТУЛА на английском */ %>
          <template>
            <el-form-item label="<%= __('Description') %> (En)" prop="subtitle">
              <el-col :xs="16" :sm="15" :md="15" :lg="14" :xl="14">
                <el-input
                        type="textarea"
                        :rows="3"
                        clearable
                        autosize
                        :keyup="ruleForm.subtitle "
                        placeholder="Please input"
                        v-model="ruleForm.subtitle "
                        maxlength="300"
                        show-word-limit>
                </el-input>
              </el-col>
            </el-form-item>
          </template>

          <div class="mt-5">
            <el-divider content-position="left">Русский</el-divider>

            <% /* ОПИСАНИЕ ТИТУЛА на русском */ %>
            <template>
              <el-form-item label="<%= __('Description') %> (Ru)" prop="subtitleRu">
                <el-col :xs="16" :sm="15" :md="15" :lg="14" :xl="14">
                  <el-input
                          type="textarea"
                          :rows="3"
                          clearable
                          autosize
                          :keyup="ruleForm.subtitleRu "
                          placeholder="Please input"
                          v-model="ruleForm.subtitleRu"
                          maxlength="300"
                          show-word-limit>
                  </el-input>
                </el-col>
              </el-form-item>
            </template>


            <% /* НАЗВАНИЕ ТИТУЛА на русском*/ %>
            <template>
              <el-form-item label="<%= __('Title') %> (Ru)" prop="labelRu">
                <el-input show-word-limit
                          style="width:80%;"
                          clearable
                          maxlength="70"
                          size="small"
                          :keyup="ruleForm.labelRu"
                          placeholder="<%= __('Title') %>"
                          v-model="ruleForm.labelRu"></el-input>
              </el-form-item>
            </template>
          </div>
          <% /* ССЫЛКА НА ФЛАГ СТРАНЫ*/ %>
          <!--<template>
                        <el-form-item label="<%= __('Flag link') %>" prop="flag">
                            <el-input show-word-limit
                                      style="width:80%;"
                                      clearable
                                      maxlength="470"
                                      size="small"
                                      placeholder="<%= __('link to flag country') %>"
                                      v-model="ruleForm.flag"></el-input>
                        </el-form-item>
                    </template>-->
          <% /* ССЫЛКА НА ФЛАГ СТРАНЫ*/ %>
          <template>
            <el-form-item label="<%= __('Country flag') %>" prop="flag">
              <el-select v-model="ruleForm.flag" placeholder="Select">
                <el-option
                        v-for="item in countrys"
                        :key="item.label"
                        :label="item.labelRu"
                        :value="item.label">
                  <span style="float: left">{{ item.labelRu }}</span>
                  <span style="float: right; color: #8492a6; font-size: 13px">{{ item.label }}</span>
                </el-option>
              </el-select>
            </el-form-item>
          </template>
          <% /* ВИДЕН ТИТУЛ В СИСТЕМЕ ИЛИ НЕТ */ %>
          <div class="flex justify-content-center">
            <el-form-item prop="see">
              <el-switch
                      style="display: block"
                      v-model="ruleForm.see"
                      active-color="#13ce66"
                      inactive-color="#ff4949"
                      active-text="<%= __('visible') %>"
                      inactive-text="<%= __('not visible') %>">
              </el-switch>
            </el-form-item>
          </div>

          <div class="my-3 pt-4 text-center hidden-xs-only">
            <el-form-item>
              <el-button v-if="!buttonUpdate" @click="resetForm('ruleForm')"><%= __('Reset') %></el-button>
              <el-button @click="buttonUpdate = false; centerDialogAdded = false"><%= __('Cancel') %></el-button>
              <el-button v-if="!buttonUpdate" type="primary"
                         @click="submitForm('ruleForm')"><%= __('Create') %></el-button>
              <el-button v-else type="primary" @click="submitForm('ruleForm')"><%= __('Update') %></el-button>

            </el-form-item>
          </div>
          <div class="text-center hidden-sm-and-up">
            <el-button-group>
              <el-button @click="resetForm('ruleForm')" icon="el-icon-minus"></el-button>
              <el-button @click="buttonUpdate = false; centerDialogAdded = false" icon="el-icon-close"></el-button>
              <el-button v-if="!buttonUpdate" type="primary"
                         @click="submitForm('ruleForm')" icon="el-icon-check"></el-button>
              <el-button v-else type="primary" @click="submitForm('ruleForm')" icon="el-icon-check"></el-button>
            </el-button-group>
          </div>
        </el-form>
      </el-col>
    </el-row>
    <span slot="footer" class="dialog-footer">
  </span>
  </el-dialog>
  <patzi-section-header :obj-data="seo"></patzi-section-header>

  <patzi-row-h3-p :obj-data="seo"></patzi-row-h3-p>


  <section>
    <div class="container mb-5 pb-5">
      <el-row :gutter="5">
        <el-col :xs="24" :sm="8">
          <el-card shadow="hover">
            <p class="text-center"><%= __('Total') %>: {{counts}}</p>
          </el-card>
        </el-col>
        <el-col :xs="24" :sm="8">
          <el-card shadow="hover" :body-style="{padding:'13px'}">
            <p v-if="me.isSuperAdmin || me.isAdmin" class="flex justify-content-center">
              <el-button @click="clickAddButton()" class="btn btn-outline-info"
                         icon="el-icon-circle-plus-outline">
                <%= __('Add') %>
              </el-button>
            </p>
          </el-card>
        </el-col>
        <el-col :xs="24" :sm="8">
          <el-card shadow="hover">
            <p class="text-center"><%= __('Blocked') %>: {{hidden}}</p>
          </el-card>
        </el-col>
      </el-row>
    </div>
  </section>

</div>
<%- /* Expose server-rendered data as window.SAILS_LOCALS :: */ exposeLocalsToBrowser() %>
